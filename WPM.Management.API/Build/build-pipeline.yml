trigger:
- master

pool:
 vmImage: 'ubuntu-latest'
 
steps:
 - task: DotNetCoreCLI@2
   inputs:
     command: 'restore'
     feedsToUse: 'select'
     vstsFeed: 'bb5e0499-651d-49a4-8f54-1a07c573a7e9'

 - task: DotNetCoreCLI@2
   inputs:
    command: 'build'
    projects: '**/*.csproj'

 - task: DotNetCoreCLI@2
   inputs:
    command: 'test'
    projects: '**/*.Tests.csproj'

 - task: CopyFiles@2
   inputs:
      SourceFolder: '$(System-DefaultWorkingDirectory)/WPM.Management.API/bin'
      Contents: '**'
      TargetFolder: '$(Build-ArtifactStagingDirectory)'

 - task: PublishBuildArtifacts@1
   inputs:
      PathtoPublish: '$(Build.ArtifactStagingDirectory)'
      ArtifactName: 'drop'
      publishLocation: 'Container'
  
  
 - script : echo all done
   displayName : 'All done'
    


     